#!/bin/sh
#
# Run touchscreen calibration on first boot only
#

CALIBRATION_SCRIPT=/usr/local/bin/touchscreen-calibration-once.sh
CALIBRATION_FLAG=/var/lib/pitlab-wallet/.calibrated

start() {
    if [ ! -f "$CALIBRATION_FLAG" ]; then
        printf "Running touchscreen calibration: "
        $CALIBRATION_SCRIPT
        [ $? = 0 ] && echo "OK" || echo "FAIL"
    fi
}

stop() {
    # Nothing to stop for oneshot calibration
    :
}

case "$1" in
    start)
        start
        ;;
    stop)
        stop
        ;;
    restart|reload)
        start
        ;;
    *)
        echo "Usage: $0 {start|stop|restart}"
        exit 1
esac

exit 0
